!function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={exports:{},id:r,loaded:!1};return e[r].call(i.exports,i,i.exports,n),i.loaded=!0,i.exports}n.m=e,n.c=t,n.p="",n(0)}([function(e,t,n){"use strict";var r=n(1),i=function(e){return e&&e.__esModule?e:{default:e}}(r);i.default.addDescriptions([{id:1,type:"SpriteSheet",testCol:[{id:2,type:"BaseModel"},{id:3,type:"BaseModel"},{id:4,type:"BaseModel"}]},{id:2,type:"BaseModel"},{id:3,type:"BaseModel"},{id:4,type:"BaseModel"}]),window.o=i.default.getObject(1,"SpriteSheet"),window.o1=o.clone(),console.log(o1)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(2),o=function(e){if(e&&e.__esModule){return e}else{var t={};if(e!=null){for(var n in e){if(Object.prototype.hasOwnProperty.call(e,n))t[n]=e[n]}}t.default=e;return t}}(i);function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var u=function(){function e(){a(this,e),this.descriptions={},this.arrays={},this.cache={}}return r(e,[{key:"addDescription",value:function(e){this.descriptions[e.type]||(this.descriptions[e.type]=[]),this.descriptions[e.type].push(e)}},{key:"addDescriptions",value:function(e){var t=!0,n=!1,r=void 0;try{for(var i,o=e[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){var a=i.value;this.addDescription(a)}}catch(e){n=!0,r=e}finally{try{!t&&o.return&&o.return()}finally{if(n)throw r}}}},{key:"getObject",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=o[t];if(!r)throw console.error(e,t),"::getObject() unknown object type "+t;var i=this.descriptions[t].find(function(t){return t.id==e});if(!i)throw"can not find object with id "+e;return!n&&this.cache[i[e]]||(this.cache[e]=(new r).fromJSON(i)),this.cache[e]}},{key:"addObject",value:function(e){this.arrays[e.type]||(this.arrays[e.type]=[]),this.arrays[e.type].push(e)}},{key:"removeObject",value:function(e){var t=this.arrays[e.type].findIndex(function(t){return t.id===e.id});this.arrays[e.type].splice(t,1)}},{key:"getArray",value:function(e){var t=this;if(this.arrays[e])return this.arrays[e];var n=[];return this.descriptions[e].forEach(function(e){n.push(t.getObject(e.id,e.type))}),this.arrays[e]=n}}]),e}();t.default=new u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Scene=t.ParticleSystem=t.CommonBehaviour=t.GameObject=t.GameObjectProto=t.SpriteSheet=t.FrameAnimation=t.BaseModel=void 0;var r=n(3),i=b(r),o=n(4),a=b(o),u=n(5),s=b(u),c=n(6),f=b(c),l=n(7),h=b(l),p=n(8),d=b(p),y=n(9),m=b(y),_=n(12),v=b(_);function b(e){return e&&e.__esModule?e:{default:e}}t.BaseModel=i.default,t.FrameAnimation=a.default,t.SpriteSheet=s.default,t.GameObjectProto=f.default,t.GameObject=h.default,t.CommonBehaviour=d.default,t.ParticleSystem=m.default,t.Scene=v.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=n(1),a=function(e){return e&&e.__esModule?e:{default:e}}(o);function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var s=function(e,t){return!e||(0==e.indexOf("_")||(!(!t||!t.call)||"string"!=typeof t&&("number"!=typeof t&&("boolean"!=typeof t&&(!t||void 0)))))},c=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(void 0!==t){if(null===t)return null;if("[object Array]"===Object.prototype.toString.call(t)){for(var r=[],o=0,a=t.length;o<a;o++){var u=void 0;n.indexOf(t[o])>-1?u=t[o]:(n.push(t[o]),u=e(t[o],n)),r[o]=u}return r}if("object"===(void 0===t?"undefined":i(t))){var s={};for(var c in t){var f=void 0;n.indexOf(t[c])>-1?f=t[c]:(n.push(t[c]),f=e(t[c],n)),s[c]=f}return s}return t}},f=function(){function e(){u(this,e),this.id=null,this.type=this.constructor.name}return r(e,[{key:"fromJSON",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments[1];return Object.keys(t).forEach(function(r){if(!(r in e))throw console.error(e),"::fromJSON(): class "+e.constructor.name+" has no property "+r;e[r]=t[r],e[r]&&(e[r].id&&e[r].type?e[r]=a.default.getObject(e[r].id,e[r].type):e[r].splice&&e[r].forEach(function(t,i){e[r][i]=a.default.getObject(t.id,t.type,n)}))}),this}},{key:"toJSON",value:function(){var e=this,t={};for(var n in this)s(n,this[n])||(this[n].type?t[n]={id:this[n].id,type:this[n].type}:this[n]&&this[n].splice?function(){var r=e[n],i=[];r.forEach(function(e){i.push({type:e.type,id:e.id})}),t[n]=i}():t[n]=c(this[n]));return t}},{key:"clone",value:function(){var e=this.constructor,t=new e;return t._cloner=this,t.fromJSON(this.toJSON(),!0)}},{key:"updateCloner",value:function(){this._cloner.fromJSON(this.toJSON())}}]),e}();t.default=f},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(3),o=function(e){return e&&e.__esModule?e:{default:e}}(i);function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var c=function(e){s(t,e);function t(){a(this,t);var e=u(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e._currFrame=0,e.frames=[],e.duration=1e3,e._gameObject=null,e._startTime=null,e._timeForOneFrame=~~(e.duration/e.frames.length),e}return r(t,[{key:"construct",value:function(){this._timeForOneFrame=~~(this.duration/this.frames.length)}},{key:"play",value:function(){this._gameObject._currFrameAnimation=this}},{key:"stop",value:function(){this._gameObject._currFrameAnimation=null,this._startTime=null}},{key:"update",value:function(e){this._startTime||(this._startTime=e);var t=(e-this._startTime)%this.duration;this._currFrame=~~(this.frames.length*t/this.duration),this._gameObject.currFrameIndex!=this.frames[this._currFrame]&&this._gameObject.setFrameIndex(this.frames[this._currFrame])}},{key:"nextFrame",value:function(){var e=this._currFrame;e++,e==this.frames.length&&(e=0),this._gameObject.setFrameIndex(this.frames[e]),this._currFrame=e}},{key:"previousFrame",value:function(){var e=this._currFrame;e--,e<0&&(e=this.frames.length-1),this._gameObject.setFrameIndex(this.frames[e]),this._currFrame=e}}]),t}(o.default);t.default=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(3),o=function(e){return e&&e.__esModule?e:{default:e}}(i);function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var c=function(e){s(t,e);function t(){a(this,t);var e=u(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.width=null,e.height=null,e.numOfFramesH=null,e.numOfFramesV=null,e._frameWidth=null,e._frameHeight=null,e._numOfFrames=null,e._textureInfo=null,e.testCol=[],e}return r(t,[{key:"getFramePosX",value:function(e){return e%this.numOfFramesH*this._frameWidth}},{key:"getFramePosY",value:function(e){return~~(e/this.numOfFramesH)*this._frameHeight}},{key:"calcFrameSize",value:function(){this.numOfFramesH&&this.numOfFramesV&&(this._frameWidth=this.width/this.numOfFramesH,this._frameHeight=this.height/this.numOfFramesV,this._numOfFrames=this.numOfFramesH*this.numOfFramesV)}}]),t}(o.default);t.default=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(3),o=function(e){return e&&e.__esModule?e:{default:e}}(i);function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var c=function(e){s(t,e),r(t,null,[{key:"find",value:function(e){}},{key:"findAll",value:function(e){}}]);function t(){a(this,t);var e=u(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.spriteSheet={type:"spriteSheet"},e._behaviour=null,e.commonBehaviour=[{type:"commonBehaviour"}],e.currFrameIndex=0,e._sprPosX=0,e._sprPosY=0,e.frameAnimations=[{type:"frameAnimation"}],e._currFrameAnimation=null,e._timeCreated=null,e.tileOffset={x:0,y:0},e.tileRepeat=!1,e}return r(t,[{key:"getFrAnimation",value:function(e){return this.frameAnimations.find({name:e})}},{key:"setFrameIndex",value:function(e){this.currFrameIndex=e,this._sprPosX=this.spriteSheet.getFramePosX(this.currFrameIndex),this._sprPosY=this.spriteSheet.getFramePosY(this.currFrameIndex)}},{key:"setSpriteSheet",value:function(e){this.spriteSheet=e,this.width=e._frameWidth,this.height=e._frameHeight}},{key:"update",value:function(e,t){var n=this;n._super(e,t),n._currFrameAnimation&&this._currFrameAnimation.update(e),n.__updateIndividualBehaviour__(t),n.__updateCommonBehaviour__(),n._render()}},{key:"stopFrAnimations",value:function(){this._currFrameAnimation&&this._currFrameAnimation.stop()}},{key:"_render",value:function(){}}]),t}(o.default);t.default=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),i=function(e){return e&&e.__esModule?e:{default:e}}(r);function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=function(e){u(t,e);function t(){o(this,t);var e=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.protoId=null,e.type="gameObject",e.layerId=null,e.pos=null,e}return t}(i.default);t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),i=function(e){return e&&e.__esModule?e:{default:e}}(r);function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=function(e){u(t,e);function t(){o(this,t);var e=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.parameters=[],e.description=null,e}return t}(i.default);t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(3),o=function(e){return e&&e.__esModule?e:{default:e}}(i),a=n(10),u=function(e){if(e&&e.__esModule){return e}else{var t={};if(e!=null){for(var n in e){if(Object.prototype.hasOwnProperty.call(e,n))t[n]=e[n]}}t.default=e;return t}}(a);function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function f(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var l=function(e){f(t,e);function t(){s(this,t);var e=c(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e._particles=[],e.numOfParticlesToEmit={from:1,to:10},e.particleAngle={from:0,to:0},e.particleAngle.to<e.particleAngle.from&&(e.particleAngle.to+=2*Math.PI),e.particleVelocity={from:1,to:100},e.particleLiveTime={from:100,to:1e3},e.emissionRadius=0,e}return r(t,[{key:"emit",value:function(e,t){for(var n=function(e){return u.random(e.from,e.to)},r=0;r<n(this.numOfParticlesToEmit);r++){var i=this.gameObjectProto.clone(),o=n(this.particleAngle),a=n(this.particleVelocity);i.vel.x=a*Math.cos(o),i.vel.y=a*Math.sin(o),i.pos.x=n({from:e-this.emissionRadius,to:e+this.emissionRadius}),i.pos.y=n({from:t-this.emissionRadius,to:t+this.emissionRadius}),i.liveTime=n(this.particleLiveTime),bundle.applyBehaviour(i),this._particles.push(i)}}},{key:"update",value:function(e,t){for(var n=this._particles,r=n.length,i=r-1;r--;){var o=n[i-r];o&&(o._timeCreated||(o._timeCreated=e),e-o._timeCreated>o.liveTime&&this._particles.splice(this._particles.indexOf(o),1),o.update(e,t))}}}],[{key:"find",value:function(e){}},{key:"findAll",value:function(e){}}]),t}(o.default);t.default=l},function(e,t,n){"use strict";var r=n(11);t.isPointInRect=function(e,t,n){if(n){var i=new r(e.x-t.x-t.width/2,e.y-t.y-t.height/2);i.setAngle(i.getAngle()-n),e={x:i.getX()+e.x,y:i.getY()+e.y}}return e.x>t.x&&e.x<t.x+t.width&&e.y>t.y&&e.y<t.y+t.height},t.isRectIntersectRect=function(e,t){return!(t.x>e.x+e.width||t.x+t.width<e.x||t.y>e.y+e.height||t.y+t.height<e.y)},t.radToDeg=function(e){return 180*e/Math.PI},t.degToRad=function(e){return e*Math.PI/180},t.random=function(e,t){if(e>t){var n=e;e=t,t=n}var r=Math.random()*(t-e)+e;return r>t?r=t:r<e&&(r=e),r},t.getNormalizedVectorFromPoints=function(e,t){var n=Math.atan2(t.y-e.y,t.x-e.x);return{x:Math.cos(n),y:Math.sin(n)}};var i={};i.linear=function(e,t,n,r){return n*e/r+t},i.easeInQuad=function(e,t,n,r){return e/=r,n*e*e+t},i.easeOutQuad=function(e,t,n,r){return e/=r,-n*e*(e-2)+t},i.easeInOutQuad=function(e,t,n,r){return(e/=r/2)<1?n/2*e*e+t:(e--,-n/2*(e*(e-2)-1)+t)},i.easeInCubic=function(e,t,n,r){return e/=r,n*e*e*e+t},i.easeOutCubic=function(e,t,n,r){return e/=r,e--,n*(e*e*e+1)+t},i.easeInOutCubic=function(e,t,n,r){return(e/=r/2)<1?n/2*e*e*e+t:(e-=2,n/2*(e*e*e+2)+t)},i.easeInQuart=function(e,t,n,r){return e/=r,n*e*e*e*e+t},i.easeOutQuart=function(e,t,n,r){return e/=r,e--,-n*(e*e*e*e-1)+t},i.easeInOutQuart=function(e,t,n,r){return(e/=r/2)<1?n/2*e*e*e*e+t:(e-=2,-n/2*(e*e*e*e-2)+t)},i.easeInQuint=function(e,t,n,r){return e/=r,n*e*e*e*e*e+t},i.easeOutQuint=function(e,t,n,r){return e/=r,e--,n*(e*e*e*e*e+1)+t},i.easeInOutQuint=function(e,t,n,r){return(e/=r/2)<1?n/2*e*e*e*e*e+t:(e-=2,n/2*(e*e*e*e*e+2)+t)},i.easeInSine=function(e,t,n,r){return-n*Math.cos(e/r*(Math.PI/2))+n+t},i.easeOutSine=function(e,t,n,r){return n*Math.sin(e/r*(Math.PI/2))+t},i.easeInOutSine=function(e,t,n,r){return-n/2*(Math.cos(Math.PI*e/r)-1)+t},i.easeInExpo=function(e,t,n,r){return n*Math.pow(2,10*(e/r-1))+t},i.easeOutExpo=function(e,t,n,r){return n*(1-Math.pow(2,-10*e/r))+t},i.easeInOutExpo=function(e,t,n,r){return(e/=r/2)<1?n/2*Math.pow(2,10*(e-1))+t:(e--,n/2*(2-Math.pow(2,-10*e))+t)},i.easeInCirc=function(e,t,n,r){return e/=r,-n*(Math.sqrt(1-e*e)-1)+t},i.easeOutCirc=function(e,t,n,r){return e/=r,e--,n*Math.sqrt(1-e*e)+t},i.easeInOutCirc=function(e,t,n,r){return(e/=r/2)<1?-n/2*(Math.sqrt(1-e*e)-1)+t:(e-=2,n/2*(Math.sqrt(1-e*e)+1)+t)},i.easeInElastic=function(e,t,n,r){var i=1.70158,o=0,a=n;return 0==e?t:1==(e/=r)?t+n:(o||(o=.3*r),a<Math.abs(n)?(a=n,i=o/4):i=o/(2*Math.PI)*Math.asin(n/a),-a*Math.pow(2,10*(e-=1))*Math.sin((e*r-i)*(2*Math.PI)/o)+t)},i.easeOutElastic=function(e,t,n,r){var i=1.70158,o=0,a=n;return 0==e?t:1==(e/=r)?t+n:(o||(o=.3*r),a<Math.abs(n)?(a=n,i=o/4):i=o/(2*Math.PI)*Math.asin(n/a),a*Math.pow(2,-10*e)*Math.sin((e*r-i)*(2*Math.PI)/o)+n+t)},i.easeInOutElastic=function(e,t,n,r){var i=1.70158,o=0,a=n;return 0==e?t:2==(e/=r/2)?t+n:(o||(o=r*(.3*1.5)),a<Math.abs(n)?(a=n,i=o/4):i=o/(2*Math.PI)*Math.asin(n/a),e<1?a*Math.pow(2,10*(e-=1))*Math.sin((e*r-i)*(2*Math.PI)/o)*-.5+t:a*Math.pow(2,-10*(e-=1))*Math.sin((e*r-i)*(2*Math.PI)/o)*.5+n+t)},i.easeInBack=function(e,t,n,r){var i=1.70158;return n*(e/=r)*e*((i+1)*e-i)+t},i.easeOutBack=function(e,t,n,r){var i=1.70158;return n*((e=e/r-1)*e*((i+1)*e+i)+1)+t},i.easeInOutBack=function(e,t,n,r){var i=1.70158;return(e/=r/2)<1?n/2*(e*e*((1+(i*=1.525))*e-i))+t:n/2*((e-=2)*e*((1+(i*=1.525))*e+i)+2)+t},i.easeInBounce=function(e,t,n,r){return n-i.easeOutBounce(r-e,0,n,r)+t},i.easeOutBounce=function(e,t,n,r){return(e/=r)<1/2.75?n*(7.5625*e*e)+t:e<2/2.75?n*(7.5625*(e-=1.5/2.75)*e+.75)+t:e<2.5/2.75?n*(7.5625*(e-=2.25/2.75)*e+.9375)+t:n*(7.5625*(e-=2.625/2.75)*e+.984375)+t},i.easeInOutBounce=function(e,t,n,r){return e<r/2?.5*i.easeInBounce(2*e,0,n,r)+t:.5*i.easeOutBounce(2*e-r,0,n,r)+.5*n+t},t.ease=i},function(e,t){"use strict";var n=function e(t,n){var r=t||0,i=n||0,o=0,a=0,u=function(){o=0==r?0:Math.atan(i/r),a=Math.sqrt(r*r+i*i)},s=function(){i=Math.sin(o)*a,r=Math.cos(o)*a},c=function(){i=Math.sin(o)*a,r=Math.cos(o)*a};this.setXY=function(e,t){r=e,i=t,u()},this.setX=function(e){r=e,u()},this.setY=function(e){i=e,u()},this.setAngle=function(e){o=e,s()},this.setNorm=function(e){a=e,c()},this.getXY=function(){return{x:r,y:i}},this.getX=function(){return r},this.getY=function(){return i},this.getAngle=function(){return o},this.addVec2=function(t){return new e(r+t.getX(),i+t.getY)},this.multiplyByScalar=function(t){return new e(r*t,i*t)},this.dotProduct=function(e){return r*e.getX()+i*e.getY()},this.getNorm=function(){return a},function(){u()}()};e.exports=n},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(3),o=function(e){return e&&e.__esModule?e:{default:e}}(i);function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var c=function(e){s(t,e);function t(){a(this,t);var e=u(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));if(e.alpha=1,e.layers=[{type:"layer"}],e.tileMap=null,e._allGameObjects=[],e.useBG=!1,e.colorBG={r:255,g:255,b:255},e.onShow=function(){},e._tweenMovies=[],self.tileMap={_spriteSheet:null,spriteSheetId:null,width:0,height:0,data:[]},!self.tileMap&&self.tileMap.spriteSheetId){if(self.tileMap._spriteSheet=bundle.spriteSheetList.find({id:self.tileMap.spriteSheetId}),!self.tileMap._spriteSheet)return u(e);self.tileMap._tilesInScreenX=~~(bundle.gameProps.width/self.tileMap._spriteSheet._frameWidth),self.tileMap._tilesInScreenY=~~(bundle.gameProps.height/self.tileMap._spriteSheet._frameHeight)}return e}return r(t,[{key:"addTweenMovie",value:function(e){this._tweenMovies.push(e)}},{key:"getAllSpriteSheets",value:function(){var e={};return this.layers.forEach(function(t){t.getAllSpriteSheets().forEach(function(t){e[t.id]=t})}),Object.keys(e).map(function(t){return e[t]})}},{key:"getAllGameObjects",value:function(){return this._allGameObjects}},{key:"update",value:function(e,t){var n=this;n._render();for(var r=n.layers.rs,i=n.layers.size(),o=i-1;i--;)r[i-o].update(e,t);n._tweenMovies.forEach(function(t){t.completed&&n._tweenMovies.remove(t),t._update(e)}),n.__updateIndividualBehaviour__(e)}},{key:"fadeIn",value:function(e,t){return this.tween(this,{to:{alpha:1}},e,t)}},{key:"fadeOut",value:function(e,t){return this.tween(this,{to:{alpha:0}},e,t)}},{key:"tween",value:function(e,t,n,r){var i=new tweenMovieModule.TweenMovie,o=new tweenModule.Tween(e,t,n,r);i.tween(0,o),i.play()}},{key:"_render",value:function(){var e=this,t=e.tileMap._spriteSheet;if(t)for(var n=renderer.getContext(),r=~~(camera.pos.x/e.tileMap._spriteSheet._frameWidth),i=~~(camera.pos.y/e.tileMap._spriteSheet._frameHeight),o=r+e.tileMap._tilesInScreenX+2,a=i+e.tileMap._tilesInScreenY+2,u=i;u<a;u++)for(var s=r;s<o;s++){var c=e.tileMap.data[u]&&e.tileMap.data[u][s];void 0!=c&&n.drawImage(resourceCache.get(t.resourcePath),t.getFramePosX(c),t.getFramePosY(c),t._frameWidth,t._frameHeight,s*t._frameWidth,u*t._frameHeight)}}},{key:"getTileAt",value:function(e,t){var n=this;if(!n.tileMap._spriteSheet)return null;var r=~~(e/n.tileMap._spriteSheet._frameWidth),i=~~(t/n.tileMap._spriteSheet._frameHeight);return n.tileMap.data[i]&&n.tileMap.data[i][r]}},{key:"printText",value:function(e,t,n,r){n&&(n.substring||(n=JSON.stringify(n,null,4)),renderer.printText(e,t,n,r))}},{key:"log",value:function(e){this.printText(0,0,e)}}]),t}(o.default);t.default=c}]);