
(function(){

    ve_local.bundle = new ve_local.Bundle({
        audio: <%-audio%>,
        frameAnimation: <%-frameAnimation%>,
        gameObject: <%-gameObject%>,
        scene: <%-scene%>,
        layer:<%-layer%>,
        spriteSheet: <%-spriteSheet%>,
        gameProps: <%-gameProps%>
    });

    ve_local.scripts = {};
    ve_local.scripts.gameObject = {};
    ve_local.scripts.scene = {};

    <%for (var i = 0; i<gameObjectScripts.length;i++) {%>
    ve_local.scripts.gameObject['<%-gameObjectScripts[i].name%>'] = function(){
        var clazz = <%-gameObjectScripts[i].content%>;
        return clazz;
    };
    <%}%>;
    <%for (var i = 0; i<sceneScripts.length;i++) {%>
    ve_local.scripts.scene['<%-sceneScripts[i].name%>'] = function(){
    var clazz = <%-sceneScripts[i].content%>;
    return clazz;
    };
    <%}%>;

    ve_local.bundle.prepare();
    if (!ve_local.bundle.sceneList.size()) throw 'at least one scene must be created';

    ve_local.renderer = new ve_local.CanvasRenderer();
    ve.sceneManager = new ve_local.SceneManager();
    ve.keyboard = new ve_local.Keyboard();
    ve_local.bundle.prepareGameObjectScripts();


    window.addEventListener('load',function(){
        ve_local.renderer.init();
        ve_local.mouse = new ve_local.Mouse(ve_local.renderer.getCanvas());
        ve.sceneManager.setScene(ve_local.bundle.sceneList.get(0));
    });

})();